<template>
  <div>
    <div class="main">
      <ModalVue v-show="isModalVisible" v-on:close="closeModal">
        <template v-slot:header>
          {{ headerText }}
        </template>

        <template v-slot:body>
          <span style="color: black">{{ bodyText }}</span>
          <br />
          <br />
          <span style="color: black">{{ bodyTextTwo }}</span>
        </template>

        <template v-slot:footer> </template>
      </ModalVue>
      <div class="frame first">
        <h3>–ß–¢–û –≠–¢–û –¢–ê–ö–û–ï?</h3>
        <h1>–ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–û-–†–ê–ó–í–õ–ï–ö–ê–¢–ï–õ–¨–ù–ê–Ø –ò–ì–†–ê</h1>
        <div class="logo-img">
          <img
            src="../assets/images/new-logo.png"
            alt=""
            style="width: 270px"
          />
        </div>
        <div v-on:click="buttonClicked" class="play-button">
          <!-- <nuxt-link
          :event="disabled ? '' : 'click'"
          class="link"
          to="/registration"
        > -->
          <button>–ò–ì–†–ê–¢–¨</button>
          <!-- </nuxt-link> -->
        </div>
      </div>
      <div class="frame second">
        <h3>–ê –ú–û–ñ–ù–û –ü–û–î–†–û–ë–ù–ï–ï?</h3>
        <h1>–ö–û–ù–ï–ß–ù–û!</h1>
        <div class="text-group">
          <h2>–ö–í–ò–ó<span class="hcolor">ON ‚Äî</span></h2>
          <p>
            —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ-—Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã,
            –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –≤ —Ö–æ—Ä–æ—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
          </p>
          <h2 class="hcolor">–ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨?</h2>
          <p>
            –°–æ–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –æ—Ç 4 –¥–æ 8 —á–µ–ª–æ–≤–µ–∫, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–µ –Ω–∞ —Å–∞–π—Ç–µ –∏
            –ø—Ä–∏–π—Ç–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ –Ω–∞ –∏–≥—Ä—É
          </p>
          <h2 class="hcolor">–ö–ê–ö –≠–¢–û –ü–†–û–ò–°–•–û–î–ò–¢?</h2>
          <p>
            –ò–≥—Ä–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞—É–Ω–¥–æ–≤ –∏ —Å–∞–º—ã–µ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
            –≤–æ–ø—Ä–æ—Å–æ–≤. –í–º–µ—Å—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–æ–±–æ—Ä–æ—Ç—å—Å—è –≤ —ç—Ç–æ–π –±–∏—Ç–≤–µ
            –ª–æ–≥–∏–∫–∏, —ç—Ä—É–¥–∏—Ü–∏–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –º—ã—à–ª–µ–Ω–∏—è!
          </p>
        </div>
      </div>
      <div class="frame third">
        <h3>–ê –ú–û–ñ–ù–û –ü–û–î–†–û–ë–ù–ï–ï?</h3>
        <h1>–í –ò–ì–†–ï –í–ê–° –ñ–î–ï–¢</h1>
        <h1 class="hcolor">7 –†–ê–£–ù–î–û–í:</h1>
        <div class="divider"></div>
        <p style="margin-top: 2vh">
          <span style="font-weight: 700; font-size: 20px"
            >–í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ–º—ã:</span
          >
          –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º—É–∑—ã–∫–∏ –¥–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ –∫–∏–Ω–æ, –æ—Ç –Ω–∞—É–∫–∏ –¥–æ
          –±—ã—Ç–æ–≤–æ–π –∫—É–ª—å—Ç—É—Ä—ã
        </p>
        <p style="margin-top: 2vh">
          <span style="font-weight: 700; font-size: 20px">2 —á–∞—Å–∞</span>
          –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–∂–µ–Ω–∏—è –∑–∞ –∑–≤–∞–Ω–∏–µ —Å–∞–º—ã—Ö —É–º–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤–µ—á–µ—Ä–∞ –∏
          —Ü–µ–ª–æ–≥–æ —Å–µ–∑–æ–Ω–∞
        </p>
      </div>
    </div>
  </div>
</template>

<script>
import ModalVue from '../components/ModalVue.vue'

export default {
  components: { ModalVue },
  data() {
    return {
      isModalVisible: false,
      canRegister: '',
      headerText: '',
      bodyText: '',
      bodyTextTwo: '',
      disabled: false,
    }
  },

  methods: {
    showModal() {
      this.isModalVisible = true
    },
    closeModal() {
      this.isModalVisible = false
    },
    buttonClicked() {
      this.checkIfCanRegister()
      this.checkAvailability()
    },
    async checkIfCanRegister() {
      try {
        const response = await fetch(
          'https://www.quiz-on.ru/api/register-available'
        ).then((respone) => {
          return respone.json()
        })
        const available = response.available
        this.canRegister = response.available
        if (available === 'closed') {
          this.headerText = 'üò™ –ö–≤–∏–∑OFF...'
          this.bodyText =
            '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –±–æ–ª—å—à–µ –Ω–µ—Ç –º–µ—Å—Ç –Ω–∞\u00A0–ø—Ä–µ–¥—Å—Ç–æ—è—â—É—é –∏–≥—Ä—É. –°–ª–µ–¥–∏—Ç–µ –∑–∞\u00A0–Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤\u00A0–Ω–∞—à–∏—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ —É—Å–ø–µ—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤\u00A0—Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑'
          this.showModal()
        } else if (available === 'not_opened_yet') {
          this.headerText = '–û–π ü§≠'
          this.bodyText =
            '–û—á–µ–Ω—å —Ä–∞–¥—ã, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞\u00A0–∏–≥—Ä—É! –ù–æ, –∫\u00A0—Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ—â–µ –∑–∞–∫—Ä—ã—Ç–∞.'
          this.bodyTextTwo =
            '–ß—Ç–æ–±—ã –Ω–µ\u00A0–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞\u00A0—Å–ª–µ–¥—É—é—â—É—é –∏–≥—Ä—É, —Å–ª–µ–¥–∏ –∑–∞\u00A0–∞–Ω–æ–Ω—Å–∞–º–∏ –≤\u00A0—Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö ‚Äì —Ç–∞–º –±—É–¥–µ—Ç –≤—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.'
          this.showModal()
          // this.disabled = true
        } else if (available === 'available' || available === 'reserve') {
          this.$router.push('/registration')
          this.$router.go('1')
          // this.disabled = false
        }
        return available
      } catch (error) {
        this.headerText = '–û—à–∏–±–∫–∞!'
        this.bodyText = '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫'
        this.showModal()
      }
    },
    checkAvailability() {
      console.log(this.canRegister)
      if (this.canRegister === 'closed') {
        this.headerText = 'üò™ –ö–≤–∏–∑OFF...'
        this.bodyText =
          '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –±–æ–ª—å—à–µ –Ω–µ—Ç –º–µ—Å—Ç –Ω–∞\u00A0–ø—Ä–µ–¥—Å—Ç–æ—è—â—É—é –∏–≥—Ä—É. –°–ª–µ–¥–∏—Ç–µ –∑–∞\u00A0–Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤\u00A0–Ω–∞—à–∏—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ —É—Å–ø–µ—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤\u00A0—Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑'
        this.showModal()
      } else if (this.canRegister === 'not_opened_yet') {
        this.headerText = '–û–π ü§≠'
        this.bodyText =
          '–û—á–µ–Ω—å —Ä–∞–¥—ã, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞\u00A0–∏–≥—Ä—É! –ù–æ, –∫\u00A0—Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ—â–µ –∑–∞–∫—Ä—ã—Ç–∞.'
        this.bodyTextTwo =
          '–ß—Ç–æ–±—ã –Ω–µ\u00A0–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞\u00A0—Å–ª–µ–¥—É—é—â—É—é –∏–≥—Ä—É, —Å–ª–µ–¥–∏ –∑–∞\u00A0–∞–Ω–æ–Ω—Å–∞–º–∏ –≤\u00A0—Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö ‚Äì —Ç–∞–º –±—É–¥–µ—Ç –≤—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.'
        this.showModal()
      }
    },
  },
}
</script>

<style scoped>
.main {
  width: 100vw;
  max-width: 450px;
}
.link {
  text-decoration: none;
  color: white;
}
.frame {
  margin-top: 2.5vh;
  border: 1px solid #f4da6a;
  border-radius: 21px;
  box-shadow: 0px 0px 10px 5px rgba(0, 0, 0, 0.383);
}
.first {
  background-image: radial-gradient(
      150% 60% at 30.72% 40.29%,
      rgba(0, 0, 0, 0.274) 0%,
      rgba(0, 0, 0, 0.281) 15%,
      #182a3ebe 30.33%,
      #182a3e 100%
    ),
    url('../assets/images/background-first.jpg');
  height: 100%;
  width: 90%;
  background-position: center center;
  background-size: cover;
  margin: 2.5vh auto;
}
.second {
  background-image: radial-gradient(
      100.19% 40.35% at 78.13% 40.9%,
      rgba(0, 0, 0, 0.514) 0%,
      rgba(15, 26, 46, 0.64) 48.58%,
      #182a3e 100%
    ),
    url('../assets/images/background-second.jpg');
  height: 100%;
  width: 90%;
  background-position: center center;
  background-size: cover;
  margin: 2.5vh auto;
}
.third {
  background-image: radial-gradient(
      60% 90% at 40.78% 65.16%,
      rgba(0, 0, 0, 0.529) 0%,
      rgba(0, 0, 0, 0.648) 25.74%,
      rgba(15, 26, 46, 0.64) 53.56%,
      #182a3e 100%
    ),
    url('../assets/images/background-third.jpg');

  height: 100%;
  width: 90%;
  background-position: center center;
  background-size: cover;
  margin: 2.5vh auto;
}

h3 {
  margin-top: 25px;
  margin-left: 25px;
  font-family: ProductSans;
  font-size: 16px;
  font-weight: 700;
  line-height: 16px;
  letter-spacing: 1px;
  text-align: left;
  color: white;
}

.hcolor {
  color: #f4da6a;
}

h2 {
  margin-left: 25px;
  font-family: ProductSans;
  font-size: 24px;
  font-weight: 700;
  line-height: 24px;
  letter-spacing: 2px;
  text-align: left;
  color: white;
}
h1 {
  margin-left: 25px;
  font-family: ProductSans;
  font-size: 27px;
  font-weight: 700;
  line-height: 30px;
  letter-spacing: 1px;
  text-align: left;
  color: white;
}
.logo-img {
  margin-top: 9vh;
  text-align: center;
}
button {
  margin-top: 9vh;
  margin-bottom: 5vh;
  width: 52vw;
  max-width: 234px;
  height: 17vw;
  max-height: 76.5px;
  border: 2px solid #f4da6a;
  border-radius: 17vw;
  background-color: #f4da6a;
  font-family: ProductSans;
  font-size: 22px;
  font-weight: 700;
  line-height: 22px;
  letter-spacing: 0em;
  text-align: center;
  color: black;
}
.play-button {
  width: 100%;
  max-width: 450px;
  text-align: center;
}
p {
  font-family: ProductSans;
  font-size: 18px;
  font-weight: 400;
  line-height: 20px;
  letter-spacing: 0px;
  text-align: left;
  color: white;
  margin-left: 25px;
  margin-right: 30px;
  margin-top: -5px;
}

.divider {
  color: white;
  width: 90%;
  /* margin-left: 25px; */
  border: 1px solid white;
}

.disabled {
  pointer-events: none;
}
</style>
